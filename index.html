<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Random Audio Player</title>
<link rel="stylesheet" href="./style.css">
</head>


<body>

<div id="sound-module-container">
<audio id="loopAudio" src="water_flowing_lowquality.wav" loop></audio>
<audio id="rateAudio" controls></audio>

<button id="playButton">Play</button>
<button id="stopButton">Stop</button>
<input type="number" id="intervalInput" value="3000">
<button id="setIntervalButton">Set Interval</button>
</div>

<div>
  <button onclick="showRandomText()">显示随机文本</button>
  <!-- <div class="random-text"></div> -->
</div>

<div class="l-col-right ticket-wrap" aria-label="A fake boat ticket demonstrating mixing font weights and widths">
  <div class="ticket" aria-hidden="true">
    <div class="ticket__header">
      <div class="ticket__co">
        <svg class="ticket__co-icon" xmlns="http://www.w3.org/2000/svg" width="64" height="64"><circle fill="#506072" cx="32" cy="32" r="32"/><path fill="#F4F5F6" d="M17.8 23.7c.5.2 1.1.1 1.4.2.6.1 1.3.1 1.8-.1.2-.1.5-.3.8-.5.3-.3.6-.6 1.1-1 .4-.4.9-.8 1.5-1.2.6-.4 1.3-.7 2.1-.8.4-.1.7-.1 1.1-.1h1c.7.1 1.4.3 2 .6 1.3.7 2.2 1.7 2.8 2.4.6.7 1.1 1.2 1.7 1.4.7.2 1.5.3 2.2.1.7-.2 1.4-.7 2.3-1.5.5-.4 1-.8 1.6-1.1.6-.3 1.2-.5 1.9-.6 1.2-.1 2.5.1 3.6.8 1 .7 1.7 1.6 2.5 2.3.8.7 1.8 1.2 2.9 1.2-.6 0-1.2-.1-1.8-.4-.5-.3-1-.6-1.5-1-1-.7-2-1.7-3.2-1.9-.6-.1-1.2-.1-1.7 0-.6.1-1.1.3-1.5.6-.8.5-1.3 1.6-2.4 2.8-.6.6-1.3 1.1-2.2 1.4-.9.3-1.7.3-2.6.1-1.1-.2-2-.7-2.7-1.3-.7-.6-1.1-1.1-1.5-1.5-.8-.8-1.3-1.1-1.8-1.2-.5-.1-.8-.1-.9 0-.1 0 0 .1.3.1-.2 0-.4 0-.6.1-.2.1-.3.1-.5.3-.3.2-.4.5-.6.6-.3.2-.6.5-.8.7-.4.3-.7.6-1.2 1-1 .7-2.4 1.3-3.6 1.4-.2.1-.5.1-.9.2h-.9c-.8-.2-1.6-.6-2.2-1.1-.6-.5-1-1.1-1.4-1.6-.7-1.1-1.4-2.1-2.8-2.4.3 0 .5-.1.5-.1l-.6-.3c-.5-.3-.7-.3-1-.4.2-.1.4-.1.7-.1h.8c.5 0 1.1.2 1.7.4 1 .4 1.9 1.2 2.6 1.5z"/><g opacity=".85" fill="#F4F5F6"><path d="M48.9 40.3l-.3-.3c0 .1.1.1.1.2s.1.1.2.1zM48.3 39.7l-.1-.1h-.1zM47.6 39.1l.3.3c0-.1-.1-.2-.3-.3zM48 39.6s.1-.1 0 0l.1-.1-.2-.1c.1.1.1.2.1.2zM48 39.6v.2c.1 0 .1-.1 0-.2zM47.1 40.3c-.1 0 .1-.2 0-.3-.3-.2-.6-.3-.9-.4-.1 0-.1-.4-.3-.4-.4-.1-1.2.1-.8.2.6.2 1 .4 1.6.8.5.3 1 .6 1.6 1 .1.1.3.2.4.4-.2-.2-.3-.4-.5-.6-.1-.4-.7-.4-1.1-.7zM51.6 41.8c-.1 0-.2.1-.2.1-.3-.3-.7-.2-1-.3l.1.2c.2.1.3 0 .1-.1.3.3.8.4 1.2.4-.1-.2-.1-.3-.2-.3zM52 42h-.2.2z"/><path d="M46 38.4c-1-.5-2.1-.5-3.1-.4-.1.1-.1.2-.2.1h-.3l-.4.1-.1.1c-.1.1 0 .1 0 .1h0-.2c-.1.1-.2.2-.4.2.1-.1.2-.2.4-.2l.2-.2.1-.1c-.3.1-.6.3-.9.5-.1 0-.1.1-.2.1-.2.2-.3.4-.5.4l-.1.1h-.1l-.6.5c-.1.2-.1.3-.2.5h-.2c0 .1 0 .2-.1.3.2 0 .3 0 .4-.1.2 0 0-.5.4-.4-.3-.1-.2.4-.4.4-.1 0-.3 0-.4.1-.1.3-.4.5-.6.5.2-.3.4-.3.7-.3.1-.1.1-.2.1-.3h.2c.1-.1.2-.3.2-.5-.4.3-.7.6-1.1.9-.6.4-1.3.6-2 .7-.7.1-1.4 0-2-.3-.6-.2-1.2-.7-1.7-1.2s-1.1-1.2-1.8-1.8c-.8-.6-1.9-1-2.9-1.1-1-.1-2.1.1-3.1.5-.9.5-1.6 1.2-2.2 1.7-.6.5-1.1.9-1.6 1.1-.5.2-1.2.2-1.7.1-.6-.2-1-.5-1.3-1-.3-.4-.8-1-1.7-1.8-.5-.4-1-.8-1.5-1-.6-.3-1.1-.4-1.6-.5-.6 0-1 .2-1.2.4-.3.2-.3.4-.3.6 0 .4.3.8.3.8.5.6.8.8 1.2 1 .4.3.9.6 1.4 1.6-.4-.6-.1-.6.4-.2.5.4 1.1 1.2 1.6 2 .4.6 1.1 1.1 1.9 1.3.8.2 1.6.2 2.5 0 .9-.2 1.7-.6 2.4-1.1.7-.5 1.2-1 1.7-1.4.5-.4.8-.8 1.2-1 .5-.2 1-.2 1.6-.2.6.1 1 .2 1.5.5.5.4 1.1 1 2.1 1.8.4.4 1 .7 1.7 1 .6.3 1.3.4 2 .5 1.4.1 2.7-.5 3.6-1.2.7-.5 1.4-.9 1.8-1.3.6-.6 1-1.1 1.3-1.5-.5.4-.7.8-1.3 1.4-.4.4 0-.6.2-.9.1-.2.5-.1.5-.2.2-.2.3-.5.6-.7.1-.1.2.2.3.1l.4-.4c.1-.2.3-.3.4-.2.2 0 .4 0 .6.1h.4l.2-.1c-.1-.1-.1-.2-.1-.3.1 0 .3.1.4.1-.1 0-.3-.1-.4-.1 0 .1 0 .2.1.3.6-.2 1.3-.1 2 .1-.4-.2-.7-.3-1-.6.2.1.1.2-.1.2l-.4-.4c.4 0 .8 0 1 .4h.3c.1.1 0 .2 0 .3.1 0 .1.1.2.1-.1-.2-.5-.6-.5-.6z"/><path d="M41.7 38.5c.1 0 .1-.1.2-.1-.3.1-.5.2-.7.4.2 0 .3-.2.5-.3z"/></g><path fill="#F4F5F6" d="M12 28.7c.4.2 1 .3 1.8.6.7.3 1.5.9 2 1.5.6.6 1 1.2 1.5 1.7s.9.8 1.3 1c.6.3 1.2.3 1.6.4.4 0-.5.1-1.6-.4-.5-.2-1-.5-1.5-1 .5.8 1.2 1.4 1.9 1.7.5.1 1 .1 1.5.1 1.2 0 2.3-.6 3.1-1.4.8-.7 1.6-1.6 2.5-1.9.3-.1.9-.3 1.5-.3s1.1.1 1.4.2c-.7-.2-1.4-.2-2.1-.1-.7.1-1.3.5-1.9 1-.6.5-1.1 1.1-1.8 1.7-.7.5-1.6.9-2.5 1h.3c.9-.1 1.9-.6 2.6-1.2.7-.6 1.3-1.2 1.9-1.6.2-.1.4-.3.7-.4-.2.1-.4.2-.7.4-.5.4-1 1-1.6 1.6-.4.4-1 .7-1.5 1-.4.2-.9.2-1.4.3-.3.1-.6.1-.8.1h-.3c.2.1.8.3 1.6.2.9-.1 1.9-.6 2.7-1.3.8-.6 1.4-1.1 1.9-1.4.5-.2.8-.3 1-.3.5-.2 1.2-.6 1.9-.4.2.1.4.2.6.2h.3c.5.2.7.8 1.2 1 .1.1.2.5.3.9.1.4.2.7.3.7.7-.3.1-.1 1 .6.1.1.6 0 .8.2.7.5 1.1.4 2 .4.3 0 .6 0 .9-.1h.6c.2 0 .4-.1.6-.1.2-.1.4-.2.7-.5.1-.1.5-.3.8-.7.3-.3.6-.7.6-.7 1-.8 1.2-1.7 2.2-1.7.3-.4.8-.6 1.4-.7.6 0 1.1.1 1.6.2 1 .2 1.1.7 1.5 1.5.2.2.3.3.4.5 0 .2.5.3.7.6l-.2.1c.1.1.2.3.3.3.1.1 0 .1-.1.1-.1.1-.3.1-.2.3.3.4.8.9 1.3 1.2.6.2 1.3.3 1.9.3.1-.1.1-.2.2-.2.2 0 .3 0 .5-.1.1-.2.1-.4.2-.5.1-.5.6-1 .5-1.5 0-.2-.7-.2-.9-.5 0-.1.1-.2.2-.4-.3-.1-.3-.3-.1-.4-.1 0-.1-.1-.1-.1 0-.1.1-.2.1-.2-.5-.4-.6-1-1.5-1.6-.2-.1-.5-.3-.8-.4-.1-.1-.3-.4-.4-.5-.3 0-.4.2-.6.3-.1-.2-.4-.4-.7-.6-.3-.2-.6-.4-1-.6-.7-.3-1.2-.2-1.3.1-.8-.1-.9.2-1.7.3-.5.1-1.1.2-1.7.5-.6.3-1.1.7-1.5 1.1L38.7 32l-.4.4c-.7.6-1.3.9-2.1.9s-1.5-.1-2-.5c-.6-.3-1.1-.9-1.8-1.6-.7-.7-1.7-1.4-2.9-1.7-1.2-.2-2.4-.1-3.5.4s-1.9 1.3-2.6 2c-.7.7-1.4 1.3-2.2 1.4-.8.2-1.7.1-2.3-.1-1.3-.5-2-1.9-3-2.9-.5-.5-1.1-1-1.7-1.2-.3-.1-.5-.2-.8-.3-.2-.1-.4-.1-.6-.1H12z" opacity=".8"/></svg>
        <span class="ticket__co-name">情绪小字条～</span>
      </div>
    </div>
    <div class="ticket__body">
      <div class="random-title"></div>
      <div class="random-text"></div>
    </div>
  </div>
</div>

<script>
  var loopAudio = document.getElementById('loopAudio');
  var rateAudio = document.getElementById('rateAudio');
  var playButton = document.getElementById('playButton');
  var stopButton = document.getElementById('stopButton');
  var intervalInput = document.getElementById('intervalInput');
  var setIntervalButton = document.getElementById('setIntervalButton');

  var audioFiles = [
    'water_bubbles_01.wav',
    'water_bubbles_02.wav',
    'water_bubbles_03.wav',
    'water_bubbles_04.wav',
    'water_bubbles_01.wav'
  ]; // 替换为你的音频文件路径
  var interval = 3000; // 5 seconds
  var timeoutId = null;

  // Array of random text
  var randomTexts = [
    '深呼吸：记得深呼吸，吸气计数到四，然后慢慢地呼气。',
    '你不是唯一一个：记住，很多人都会感受到社交焦虑，你并不孤单。',
    '专注于对话：专注于对话内容，而不是过度关注自己的表现。',
    '微笑：微笑可以让你看起来更友好和自信，同时也能缓解一些紧张情绪。',
    '放松身体：放松肌肉，特别是颈部和肩部，这样可以减轻紧张感。',
    '积极的自我对话：告诉自己你是有能力的，你能够处理好眼前的情境。',
    '寻找共同点：试着寻找与对方共同的话题或兴趣，这样可以更容易建立联系。',
    '记住呼吸：不要忘记呼吸，保持稳定的呼吸有助于保持冷静。',
    '轻松一笑：轻松地对待社交场合，不要把它们看得太严肃。',
    '接受自己：接受自己的情感，不要过度自责或苛求完美。',
    '专注于眼神交流：与对方进行眼神交流，这会让对话更加真实和亲密。',
    '专注于眼神交流：与对方进行眼神交流，这会让对话更加真实和亲密。',
    '不要急于回应：不要急于回应对方，可以稍微停顿一下来思考自己的回答，这是正常的。',
    '设立目标：设立一个小目标，比如与至少一人交流或认识一个新朋友。',
    '用幽默化解尴尬：尝试用幽默来化解尴尬或紧张情绪，笑声能够减轻压力。',
    '用开放性问题引导对话：使用开放性问题来引导对话，这样可以让对话更加流畅和有意义。',
    '给自己正面评价：给自己一些正面的评价和鼓励，相信自己有能力度过社交场合。',
    '尝试新的体验：把社交场合看作是一次学习和成长的机会，尝试去享受这种新的体验。',
    '放慢节奏：放慢你的说话速度和动作节奏，这样可以让你更加淡定和自信。',
    '倾听对方：倾听对方的讲话内容，表现出对他们的尊重和理解，这会建立更好的互动。',
    '记住场合不是一切：社交场合只是生活的一部分，不要过度强调它们的重要性，放轻松一些。'
  ];

  playButton.addEventListener('click', function() {
    playAudios();
  });

  stopButton.addEventListener('click', function() {
    stopAudios();
  });

  setIntervalButton.addEventListener('click', function() {
    setRandomInterval();
  });

  function playAudios() {
    // 检查是否已经在播放
    if (!loopAudio.paused || !rateAudio.paused) {
      // 如果有一个正在播放，则停止
      stopAudios();
    }

    // 循环播放音轨
    loopAudio.play();

    // 随机播放音频文件
    playRandomAudio();
  }

  function stopAudios() {
    // 停止播放音轨并重置播放进度
    loopAudio.pause();
    loopAudio.currentTime = 0;
    rateAudio.pause();
    rateAudio.currentTime = 0;

    clearTimeout(timeoutId);

    // 清除间隔计时器
    //clearInterval(intervalId);
  }

  function setRandomInterval() {
    var interval1 = parseInt(intervalInput.value);
    if (!isNaN(interval1) && interval1 > 0) {
      interval = interval1;
    } else {
      alert('Please enter a valid positive number for interval.');
    }
  }

  function playRandomAudio() {
    // 随机选择音频文件
    var randomIndex = Math.floor(Math.random() * audioFiles.length);
    rateAudio.src = audioFiles[randomIndex];
    rateAudio.play();

    // Set a timer to play the next audio after the interval
    timeoutId = setTimeout(playRandomAudio, interval);
  }

  // Function to show random text
  function showRandomText() {
    // Get random index
    var randomIndex = Math.floor(Math.random() * randomTexts.length);
    // Get random text from the array
    var randomText = randomTexts[randomIndex];
    // Split the random text into two lines using colon (:)
    var lines = randomText.split('：');
    // Display the random text with the first line centered and bold, and the second line left-aligned
    var x = document.getElementsByClassName("random-title");
    var y = document.getElementsByClassName("random-text");
    for (var i = 0; i < x.length; i++){
      x[i].innerHTML = '<div style="text-align: center; font-weight: bold;">' + lines[0] + '</div>';
    }
    for (var i = 0; i < y.length; i++){
      y[i].innerHTML = '<div style="text-align: left; word-wrap: break-word; width: 320px;">' + lines[1] + '</div>';
    }
  }
</script>

</body>
</html>
